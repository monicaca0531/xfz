function News(){}News.prototype.run=function(){this.listenQiniuUploadFileEvent(),this.initUEditor(),this.listenSubmitEvent1()},News.prototype.listenSubmitEvent=function(){$("#submit-btn").click(function(e){e.preventDefault();var t=$(this).attr("data-news-id"),n=$("input[name='title']").val(),i=$("select[name='category']").val(),o=$("input[name='desc']").val(),a=$("input[name='thumbnail']").val(),s=window.ue.getContent(),r="";r=t?"/cms/edit_news/":"/cms/write_news/",xfzajax.post({url:r,data:{title:n,category:i,desc:o,thumbnail:a,content:s,pk:t},success:function(e){200===e.code&&xfzalert.alertSuccess("恭喜！新闻发表成功！",function(){window.location.reload()})}})})},News.prototype.initUEditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},News.prototype.listenUploadFileEvent=function(){var n=$("#thumbnail-btn");n.change(function(){var e=n[0].files[0],t=new FormData;t.append("file",e),xfzajax.post({url:"/cms/upload_file/",data:t,processData:!1,contentType:!1,success:function(e){if(200===e.code){var t=e.data.url;$("#thumbnail-form").val(t)}}})})},News.prototype.listenQiniuUploadFileEvent=function(){var s=this;$("#thumbnail-btn").change(function(){var a=this.files[0];xfzajax.get({url:"/cms/qntoken/",success:function(e){if(200===e.code){var t=e.data.token,n=(new Date).getTime()+"."+a.name.split(".")[1],i={fname:n,params:{},mimeType:["image/png","image/jpeg","image/gif","video/x-ms-wmv"]},o={useCdnDomain:!0,retryCount:6,region:qiniu.region.z2};qiniu.upload(a,n,t,i,o).subscribe({next:s.handleFileUploadProgress,error:s.handleFileUploadError,complete:s.handleFileUploadComplete})}}})})},News.prototype.handleFileUploadProgress=function(e){var t=e.total.percent.toFixed(0)+"%";News.progressGroup.show();var n=$(".progress-bar");n.css({width:t}),n.text(t)},News.prototype.handleFileUploadError=function(e){window.messageBox.showError(e.message),News.progressGroup.hide()},News.prototype.handleFileUploadComplete=function(e){console.log(e),News.progressGroup.hide();var t="http://pvjqfkpqc.bkt.clouddn.com/"+e.key;$("input[name='thumbnail']").val(t),$(".progress-bar").css({width:0})},News.prototype.listenSubmitEvent1=function(){$("#submit-btn").click(function(e){e.preventDefault();var t=$(this).attr("data-news-id"),n=$("input[name='title']").val(),i=$("select[name='category']").val(),o=$("input[name='desc']").val(),a=$("input[name='thumbnail']").val(),s=window.ue.getContent(),r="";r=t?"/cms/edit_news/":"/cms/write_news/",xfzajax.post({url:r,data:{title:n,category:i,desc:o,thumbnail:a,content:s,pk:t},success:function(e){200===e.code&&xfzalert.alertSuccess("创建了一条新闻，再见！",function(){window.location.reload()})}})})},$(function(){(new News).run(),News.progressGroup=$("#progress-group")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsInByb3RvdHlwZSIsInJ1biIsInRoaXMiLCJsaXN0ZW5RaW5pdVVwbG9hZEZpbGVFdmVudCIsImluaXRVRWRpdG9yIiwibGlzdGVuU3VibWl0RXZlbnQxIiwibGlzdGVuU3VibWl0RXZlbnQiLCIkIiwiY2xpY2siLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwicGsiLCJhdHRyIiwidGl0bGUiLCJ2YWwiLCJjYXRlZ29yeSIsImRlc2MiLCJ0aHVtYm5haWwiLCJjb250ZW50Iiwid2luZG93IiwidWUiLCJnZXRDb250ZW50IiwidXJsIiwieGZ6YWpheCIsInBvc3QiLCJkYXRhIiwic3VjY2VzcyIsInJlc3VsdCIsInhmemFsZXJ0IiwiYWxlcnRTdWNjZXNzIiwibG9jYXRpb24iLCJyZWxvYWQiLCJVRSIsImdldEVkaXRvciIsImluaXRpYWxGcmFtZUhlaWdodCIsInNlcnZlclVybCIsImxpc3RlblVwbG9hZEZpbGVFdmVudCIsInRodW1uYWlsQnRuIiwiY2hhbmdlIiwiZmlsZSIsImZpbGVzIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJzZWxmIiwiZ2V0IiwidG9rZW4iLCJrZXkiLCJEYXRlIiwiZ2V0VGltZSIsIm5hbWUiLCJzcGxpdCIsInB1dEV4dHJhIiwiZm5hbWUiLCJwYXJhbXMiLCJtaW1lVHlwZSIsImNvbmZpZyIsInVzZUNkbkRvbWFpbiIsInJldHJ5Q291bnQiLCJyZWdpb24iLCJxaW5pdSIsInoyIiwidXBsb2FkIiwic3Vic2NyaWJlIiwibmV4dCIsImhhbmRsZUZpbGVVcGxvYWRQcm9ncmVzcyIsImVycm9yIiwiaGFuZGxlRmlsZVVwbG9hZEVycm9yIiwiY29tcGxldGUiLCJoYW5kbGVGaWxlVXBsb2FkQ29tcGxldGUiLCJyZXNwb25zZSIsInBlcmNlbnRUZXh0IiwidG90YWwiLCJwZXJjZW50IiwidG9GaXhlZCIsInByb2dyZXNzR3JvdXAiLCJzaG93IiwicHJvZ3Jlc3NCYXIiLCJjc3MiLCJ3aWR0aCIsInRleHQiLCJtZXNzYWdlQm94Iiwic2hvd0Vycm9yIiwibWVzc2FnZSIsImhpZGUiLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoiQUFDQSxTQUFTQSxRQUlUQSxLQUFLQyxVQUFVQyxJQUFNLFdBRWpCQyxLQUFLQyw2QkFDTEQsS0FBS0UsY0FDTEYsS0FBS0csc0JBSVROLEtBQUtDLFVBQVVNLGtCQUFvQixXQUNmQyxFQUFFLGVBQ1JDLE1BQU0sU0FBVUMsR0FDdEJBLEVBQU1DLGlCQUNOLElBQ0lDLEVBRE1KLEVBQUVMLE1BQ0NVLEtBQUssZ0JBRWRDLEVBQVFOLEVBQUUsdUJBQXVCTyxNQUNqQ0MsRUFBV1IsRUFBRSwyQkFBMkJPLE1BQ3hDRSxFQUFPVCxFQUFFLHNCQUFzQk8sTUFDL0JHLEVBQVlWLEVBQUUsMkJBQTJCTyxNQUN6Q0ksRUFBVUMsT0FBT0MsR0FBR0MsYUFFcEJDLEVBQU0sR0FFTkEsRUFERFgsRUFDTyxrQkFFQSxtQkFHVlksUUFBUUMsS0FBSyxDQUNURixJQUFPQSxFQUNQRyxLQUFRLENBQ0paLE1BQVNBLEVBQ1RFLFNBQVlBLEVBQ1pDLEtBQVFBLEVBQ1JDLFVBQWFBLEVBQ2JDLFFBQVdBLEVBQ1hQLEdBQU1BLEdBRVZlLFFBQVcsU0FBVUMsR0FDSyxNQUFuQkEsRUFBYSxNQUNaQyxTQUFTQyxhQUFhLGFBQWEsV0FDL0JWLE9BQU9XLFNBQVNDLGlCQVF4Q2hDLEtBQUtDLFVBQVVJLFlBQWMsV0FDekJlLE9BQU9DLEdBQUtZLEdBQUdDLFVBQVUsU0FBUyxDQUM5QkMsbUJBQXNCLElBQ3RCQyxVQUFhLHNCQUlyQnBDLEtBQUtDLFVBQVVvQyxzQkFBd0IsV0FDbkMsSUFDSUMsRUFBYzlCLEVBQUUsa0JBQ3BCOEIsRUFBWUMsT0FBTyxXQUNmLElBQUlDLEVBQU1GLEVBQVksR0FBR0csTUFBTSxHQUMzQkMsRUFBVyxJQUFJQyxTQUNuQkQsRUFBU0UsT0FBTyxPQUFPSixHQUN2QmhCLFFBQVFDLEtBQUssQ0FDVEYsSUFBTSxvQkFDTkcsS0FBT2dCLEVBQ1BHLGFBQWMsRUFDZEMsYUFBYyxFQUNkbkIsUUFBVSxTQUFVQyxHQUNoQixHQUFzQixNQUFuQkEsRUFBYSxLQUFVLENBQ3RCLElBQUlMLEVBQU1LLEVBQWEsS0FBTyxJQUNWcEIsRUFBRSxtQkFDUk8sSUFBSVEsVUFPdEN2QixLQUFLQyxVQUFVRywyQkFBNkIsV0FDeEMsSUFBSTJDLEVBQU81QyxLQUNRSyxFQUFFLGtCQUNSK0IsT0FBTyxXQUNoQixJQUFJQyxFQUFPckMsS0FBS3NDLE1BQU0sR0FDdEJqQixRQUFRd0IsSUFBSSxDQUNSekIsSUFBTSxnQkFDTkksUUFBVSxTQUFVQyxHQUNoQixHQUFzQixNQUFuQkEsRUFBYSxLQUFVLENBQ3RCLElBQUlxQixFQUFRckIsRUFBYSxLQUFTLE1BQzlCc0IsR0FBTSxJQUFLQyxNQUFRQyxVQUFZLElBQU1aLEVBQUthLEtBQUtDLE1BQU0sS0FBSyxHQUMxREMsRUFBVyxDQUNYQyxNQUFPTixFQUNQTyxPQUFRLEdBQ1JDLFNBQVUsQ0FBQyxZQUFhLGFBQWMsWUFBYSxtQkFFbkRDLEVBQVMsQ0FDVEMsY0FBYSxFQUNiQyxXQUFXLEVBQ1hDLE9BQVFDLE1BQU1ELE9BQU9FLElBRVJELE1BQU1FLE9BQU96QixFQUFLVSxFQUFJRCxFQUFNTSxFQUFTSSxHQUMzQ08sVUFBVSxDQUNqQkMsS0FBT3BCLEVBQUtxQix5QkFDWkMsTUFBUXRCLEVBQUt1QixzQkFDYkMsU0FBV3hCLEVBQUt5QixrQ0FTeEN4RSxLQUFLQyxVQUFVbUUseUJBQTJCLFNBQVNLLEdBQy9DLElBRUlDLEVBRlFELEVBQVNFLE1BQ0RDLFFBQ01DLFFBQVEsR0FBSyxJQUNuQjdFLEtBQUs4RSxjQUNYQyxPQUNkLElBQUlDLEVBQWN4RSxFQUFFLGlCQUNwQndFLEVBQVlDLElBQUksQ0FBQ0MsTUFBUVIsSUFDekJNLEVBQVlHLEtBQUtULElBR3JCMUUsS0FBS0MsVUFBVXFFLHNCQUF3QixTQUFTRCxHQUM1Q2pELE9BQU9nRSxXQUFXQyxVQUFVaEIsRUFBTWlCLFNBQ2R0RixLQUFLOEUsY0FDWFMsUUFHbEJ2RixLQUFLQyxVQUFVdUUseUJBQTJCLFNBQVNDLEdBQy9DZSxRQUFRQyxJQUFJaEIsR0FDUXpFLEtBQUs4RSxjQUNYUyxPQUdkLElBRUloRSxFQUZTLG9DQUNGa0QsRUFBU3ZCLElBRUMxQyxFQUFFLDJCQUNSTyxJQUFJUSxHQUNEZixFQUFFLGlCQUNSeUUsSUFBSSxDQUFDQyxNQUFRLEtBRzdCbEYsS0FBS0MsVUFBVUssbUJBQXFCLFdBQ2hCRSxFQUFFLGVBQ1JDLE1BQU0sU0FBVUMsR0FDdEJBLEVBQU1DLGlCQUNOLElBQ0lDLEVBRE1KLEVBQUVMLE1BQ0NVLEtBQUssZ0JBRWRDLEVBQVFOLEVBQUUsdUJBQXVCTyxNQUNqQ0MsRUFBV1IsRUFBRSwyQkFBMkJPLE1BQ3hDRSxFQUFPVCxFQUFFLHNCQUFzQk8sTUFDL0JHLEVBQVlWLEVBQUUsMkJBQTJCTyxNQUN6Q0ksRUFBVUMsT0FBT0MsR0FBR0MsYUFDcEJDLEVBQU0sR0FHTkEsRUFERFgsRUFDTyxrQkFFQSxtQkFFVlksUUFBUUMsS0FBSyxDQUNURixJQUFNQSxFQUNORyxLQUFPLENBQ0haLE1BQVFBLEVBQ1JFLFNBQVdBLEVBQ1hDLEtBQU9BLEVBQ1BDLFVBQVlBLEVBQ1pDLFFBQVVBLEVBQ1ZQLEdBQUtBLEdBRVRlLFFBQVUsU0FBVUMsR0FDTSxNQUFuQkEsRUFBYSxNQUNaQyxTQUFTQyxhQUFhLGNBQWMsV0FDaENWLE9BQU9XLFNBQVNDLGlCQVF4Q3hCLEVBQUUsWUFDYSxJQUFJUixNQUNWRSxNQUVMRixLQUFLOEUsY0FBZ0J0RSxFQUFFIiwiZmlsZSI6IndyaXRlX25ld3MubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmZ1bmN0aW9uIE5ld3MoKSB7XHJcblxyXG59XHJcblxyXG5OZXdzLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyB0aGlzLmxpc3RlblVwbG9hZEZpbGVFdmVudCgpO1xyXG4gICAgdGhpcy5saXN0ZW5RaW5pdVVwbG9hZEZpbGVFdmVudCgpO1xyXG4gICAgdGhpcy5pbml0VUVkaXRvcigpO1xyXG4gICAgdGhpcy5saXN0ZW5TdWJtaXRFdmVudDEoKTtcclxuICAgIC8vIHRoaXMubGlzdGVuU3VibWl0RXZlbnQoKTtcclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLmxpc3RlblN1Ym1pdEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHN1Ym1pdEJ0biA9ICQoXCIjc3VibWl0LWJ0blwiKTtcclxuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciBidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBwayA9IGJ0bi5hdHRyKCdkYXRhLW5ld3MtaWQnKTtcclxuXHJcbiAgICAgICAgdmFyIHRpdGxlID0gJChcImlucHV0W25hbWU9J3RpdGxlJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGNhdGVnb3J5ID0gJChcInNlbGVjdFtuYW1lPSdjYXRlZ29yeSddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBkZXNjID0gJChcImlucHV0W25hbWU9J2Rlc2MnXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgdGh1bWJuYWlsID0gJChcImlucHV0W25hbWU9J3RodW1ibmFpbCddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBjb250ZW50ID0gd2luZG93LnVlLmdldENvbnRlbnQoKTtcclxuXHJcbiAgICAgICAgdmFyIHVybCA9ICcnO1xyXG4gICAgICAgIGlmKHBrKXtcclxuICAgICAgICAgICAgdXJsID0gJy9jbXMvZWRpdF9uZXdzLyc7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHVybCA9ICcvY21zL3dyaXRlX25ld3MvJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiB1cmwsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3RpdGxlJzogdGl0bGUsXHJcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnknOiBjYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICdkZXNjJzogZGVzYyxcclxuICAgICAgICAgICAgICAgICd0aHVtYm5haWwnOiB0aHVtYm5haWwsXHJcbiAgICAgICAgICAgICAgICAnY29udGVudCc6IGNvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICAncGsnOiBwa1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2Vzcygn5oGt5Zac77yB5paw6Ze75Y+R6KGo5oiQ5Yqf77yBJyxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5OZXdzLnByb3RvdHlwZS5pbml0VUVkaXRvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHdpbmRvdy51ZSA9IFVFLmdldEVkaXRvcignZWRpdG9yJyx7XHJcbiAgICAgICAgJ2luaXRpYWxGcmFtZUhlaWdodCc6IDQwMCxcclxuICAgICAgICAnc2VydmVyVXJsJzogJy91ZWRpdG9yL3VwbG9hZC8nXHJcbiAgICB9KTtcclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLmxpc3RlblVwbG9hZEZpbGVFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdGh1bW5haWxCdG4gPSAkKCcjdGh1bWJuYWlsLWJ0bicpXHJcbiAgICB0aHVtbmFpbEJ0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmaWxlID10aHVtbmFpbEJ0blswXS5maWxlc1swXTtcclxuICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLGZpbGUpO1xyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOicvY21zL3VwbG9hZF9maWxlLycsXHJcbiAgICAgICAgICAgICdkYXRhJzpmb3JtRGF0YSxcclxuICAgICAgICAgICAgJ3Byb2Nlc3NEYXRhJzpmYWxzZSxcclxuICAgICAgICAgICAgJ2NvbnRlbnRUeXBlJzpmYWxzZSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSByZXN1bHRbJ2RhdGEnXVsndXJsJ107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRodW1uYWlsSW5wdXQgPSAkKFwiI3RodW1ibmFpbC1mb3JtXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRodW1uYWlsSW5wdXQudmFsKHVybCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUubGlzdGVuUWluaXVVcGxvYWRGaWxlRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHRodW1ibmFpbEJ0biA9ICQoXCIjdGh1bWJuYWlsLWJ0blwiKTtcclxuICAgIHRodW1ibmFpbEJ0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmaWxlID0gdGhpcy5maWxlc1swXTtcclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOicvY21zL3FudG9rZW4vJyxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IHJlc3VsdFsnZGF0YSddWyd0b2tlbiddO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpICsgJy4nICsgZmlsZS5uYW1lLnNwbGl0KCcuJylbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHB1dEV4dHJhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbmFtZToga2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZTogWydpbWFnZS9wbmcnLCAnaW1hZ2UvanBlZycsICdpbWFnZS9naWYnLCAndmlkZW8veC1tcy13bXYnXVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmZpZyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlQ2RuRG9tYWluOnRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJ5Q291bnQ6NixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiBxaW5pdS5yZWdpb24uejIsXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IHFpbml1LnVwbG9hZChmaWxlLGtleSx0b2tlbixwdXRFeHRyYSxjb25maWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmFibGUuc3Vic2NyaWJlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQnOnNlbGYuaGFuZGxlRmlsZVVwbG9hZFByb2dyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZXJyb3InOnNlbGYuaGFuZGxlRmlsZVVwbG9hZEVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnY29tcGxldGUnOnNlbGYuaGFuZGxlRmlsZVVwbG9hZENvbXBsZXRlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuXHJcbk5ld3MucHJvdG90eXBlLmhhbmRsZUZpbGVVcGxvYWRQcm9ncmVzcyA9IGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgIHZhciB0b3RhbCA9IHJlc3BvbnNlLnRvdGFsO1xyXG4gICAgdmFyIHBlcmNlbnQgPSB0b3RhbC5wZXJjZW50O1xyXG4gICAgdmFyIHBlcmNlbnRUZXh0ID0gcGVyY2VudC50b0ZpeGVkKDApICsgJyUnO1xyXG4gICAgdmFyIHByb2dyZXNzR3JvdXAgPSBOZXdzLnByb2dyZXNzR3JvdXA7XHJcbiAgICBwcm9ncmVzc0dyb3VwLnNob3coKTtcclxuICAgIHZhciBwcm9ncmVzc0JhciA9ICQoXCIucHJvZ3Jlc3MtYmFyXCIpO1xyXG4gICAgcHJvZ3Jlc3NCYXIuY3NzKHtcIndpZHRoXCI6cGVyY2VudFRleHR9KTtcclxuICAgIHByb2dyZXNzQmFyLnRleHQocGVyY2VudFRleHQpO1xyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUuaGFuZGxlRmlsZVVwbG9hZEVycm9yID0gZnVuY3Rpb24oZXJyb3Ipe1xyXG4gICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0Vycm9yKGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgdmFyIHByb2dyZXNzR3JvdXAgPSBOZXdzLnByb2dyZXNzR3JvdXA7XHJcbiAgICBwcm9ncmVzc0dyb3VwLmhpZGUoKTtcclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLmhhbmRsZUZpbGVVcGxvYWRDb21wbGV0ZSA9IGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuICAgIHZhciBwcm9ncmVzc0dyb3VwID0gTmV3cy5wcm9ncmVzc0dyb3VwO1xyXG4gICAgcHJvZ3Jlc3NHcm91cC5oaWRlKCk7XHJcblxyXG5cclxuICAgIHZhciBkb21haW4gPSAnaHR0cDovL3B2anFma3BxYy5ia3QuY2xvdWRkbi5jb20vJztcclxuICAgIHZhciBuYW1lID0gcmVzcG9uc2Uua2V5O1xyXG4gICAgdmFyIHVybCA9IGRvbWFpbiArIG5hbWU7XHJcbiAgICB2YXIgdGh1bWJuYWlsSW5wdXQgPSAkKFwiaW5wdXRbbmFtZT0ndGh1bWJuYWlsJ11cIik7XHJcbiAgICB0aHVtYm5haWxJbnB1dC52YWwodXJsKTtcclxuICAgIHZhciBwcm9ncmVzc0JhciA9ICQoXCIucHJvZ3Jlc3MtYmFyXCIpO1xyXG4gICAgcHJvZ3Jlc3NCYXIuY3NzKHtcIndpZHRoXCI6MH0pO1xyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUubGlzdGVuU3VibWl0RXZlbnQxID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzdWJtaXRCdG4gPSAkKCcjc3VibWl0LWJ0bicpO1xyXG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIGJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHBrID0gYnRuLmF0dHIoJ2RhdGEtbmV3cy1pZCcpO1xyXG5cclxuICAgICAgICB2YXIgdGl0bGUgPSAkKFwiaW5wdXRbbmFtZT0ndGl0bGUnXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgY2F0ZWdvcnkgPSAkKFwic2VsZWN0W25hbWU9J2NhdGVnb3J5J11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGRlc2MgPSAkKFwiaW5wdXRbbmFtZT0nZGVzYyddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciB0aHVtYm5haWwgPSAkKFwiaW5wdXRbbmFtZT0ndGh1bWJuYWlsJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGNvbnRlbnQgPSB3aW5kb3cudWUuZ2V0Q29udGVudCgpO1xyXG4gICAgICAgIHZhciB1cmwgPSAnJztcclxuXHJcbiAgICAgICAgaWYocGspe1xyXG4gICAgICAgICAgICB1cmwgPSAnL2Ntcy9lZGl0X25ld3MvJztcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdXJsID0gJy9jbXMvd3JpdGVfbmV3cy8nO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6dXJsLFxyXG4gICAgICAgICAgICAnZGF0YSc6e1xyXG4gICAgICAgICAgICAgICAgJ3RpdGxlJzp0aXRsZSxcclxuICAgICAgICAgICAgICAgICdjYXRlZ29yeSc6Y2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICAnZGVzYyc6ZGVzYyxcclxuICAgICAgICAgICAgICAgICd0aHVtYm5haWwnOnRodW1ibmFpbCxcclxuICAgICAgICAgICAgICAgICdjb250ZW50Jzpjb250ZW50LFxyXG4gICAgICAgICAgICAgICAgJ3BrJzpwa1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKCfliJvlu7rkuobkuIDmnaHmlrDpl7vvvIzlho3op4HvvIEnLGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG5ld3MgPSBuZXcgTmV3cygpO1xyXG4gICAgbmV3cy5ydW4oKTtcclxuXHJcbiAgICBOZXdzLnByb2dyZXNzR3JvdXAgPSAkKCcjcHJvZ3Jlc3MtZ3JvdXAnKTtcclxufSkiXX0=
