function FrontBase(){}function Auth(){this.scrollWraper=$(".scroll-wraper"),this.smsCaptcha=$(".sms-captcha-btn")}FrontBase.prototype.run=function(){this.listenAuthBoxHover(),this.handleNavStatus()},FrontBase.prototype.listenAuthBoxHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},FrontBase.prototype.handleNavStatus=function(){console.log("..........");var t=window.location.href,n=window.location.protocol+"//"+window.location.host,a=t.replace(n,"");$(".nav li").each(function(t,n){var e=$(n);if(e.children("a").attr("href")===a)return e.addClass("active"),!1})},Auth.prototype.run=function(){this.listenShowHideEvent(),this.listenSwitchEvent(),this.listenSigninEvent(),this.listenSignupEvent(),this.listenImageCaptchaEvent(),this.listenSmsCaptchaEvent()},Auth.prototype.showEvent=function(){$(".mask-wraper").show()},Auth.prototype.hideEvent=function(){$(".mask-wraper").hide()},Auth.prototype.smsSuccessEvent=function(){var t=this;messageBox.showSuccess("短信验证码发送成功！"),t.smsCaptcha.addClass("disabled");var n=10;t.smsCaptcha.unbind("click");var e=setInterval(function(){t.smsCaptcha.text(n+"s"),(n-=1)<=0&&(clearInterval(e),t.smsCaptcha.removeClass("disable"),t.smsCaptcha.text("发送验证码"),t.listenSmsCaptchaEvent())},1e3)},Auth.prototype.listenShowHideEvent=function(){var t=this,n=$(".signin-btn"),e=$(".signup-btn"),a=$(".close-btn");n.click(function(){t.showEvent(),t.scrollWraper.css({left:0})}),e.click(function(){t.showEvent(),t.scrollWraper.css({left:-400})}),a.click(function(){t.hideEvent()})},Auth.prototype.listenSwitchEvent=function(){var n=this;$(".switch").click(function(){var t=n.scrollWraper.css("left");(t=parseInt(t))<0?n.scrollWraper.animate({left:0}):n.scrollWraper.animate({left:"-400px"})})},Auth.prototype.listenSigninEvent=function(){var a=this,t=$(".signin-group"),s=t.find("input[name='telephone']"),i=t.find("input[name='password']"),o=t.find("input[name='remember']");t.find(".submit-btn").click(function(){var t=s.val(),n=i.val(),e=o.prop("checked");xfzajax.post({url:"account/login/",data:{telephone:t,password:n,remember:e?1:0},success:function(t){a.hideEvent(),window.location.reload()}})})},Auth.prototype.listenSignupEvent=function(){var t=$(".signup-group"),o=t.find("input[name='telephone']"),c=t.find("input[name='username']"),r=t.find("input[name='img_captcha']"),p=t.find("input[name='password1']"),u=t.find("input[name='password2']"),l=t.find("input[name='sms_captcha']");t.find(".submit-btn").click(function(){var t=o.val(),n=c.val(),e=r.val(),a=p.val(),s=u.val(),i=l.val();xfzajax.post({url:"account/register/",data:{telephone:t,username:n,img_captcha:e,password1:a,password2:s,sms_captcha:i},success:function(t){window.location.reload()}})})},Auth.prototype.listenImageCaptchaEvent=function(){var t=$(".img-captcha");t.click(function(){t.attr("src","account/img_captcha/?random="+Math.random())})},Auth.prototype.listenSmsCaptchaEvent=function(){var n=this,e=$(".signup-group input[name='telephone']");n.smsCaptcha.click(function(){var t=e.val();t||messageBox.showInfo("请输入手机号码！"),xfzajax.get({url:"account/sms_captcha/",data:{telephone:t},success:function(t){200==t.code&&n.smsSuccessEvent()},fail:function(t){console.log(t)}})})},$(function(){(new Auth).run(),(new FrontBase).run()}),$(function(){window.template&&(template.defaults.imports.timeSince=function(t){var n=new Date(t),e=n.getTime(),a=((new Date).getTime()-e)/1e3;return a<60?"刚刚":60<=a&&a<3600?parseInt(a/60)+"分钟前":3600<=a&&a<86400?parseInt(a/60/60)+"小时前":86400<=a&&a<2592e3?parseInt(a/60/60/24)+"天前":n.getFullYear()+"/"+n.getMonth()+"/"+n.getDay()+" "+n.getHours()+":"+n.getMinutes()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInRoaXMiLCJzY3JvbGxXcmFwZXIiLCIkIiwic21zQ2FwdGNoYSIsInByb3RvdHlwZSIsInJ1biIsImxpc3RlbkF1dGhCb3hIb3ZlciIsImhhbmRsZU5hdlN0YXR1cyIsImF1dGhCb3giLCJ1c2VyTW9yZUJveCIsImhvdmVyIiwic2hvdyIsImhpZGUiLCJjb25zb2xlIiwibG9nIiwidXJsIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiZG9tYWluIiwicHJvdG9jb2wiLCJob3N0IiwicGF0aCIsInJlcGxhY2UiLCJlYWNoIiwiaW5kZXgiLCJlbGVtZW50IiwibGkiLCJjaGlsZHJlbiIsImF0dHIiLCJhZGRDbGFzcyIsImxpc3RlblNob3dIaWRlRXZlbnQiLCJsaXN0ZW5Td2l0Y2hFdmVudCIsImxpc3RlblNpZ25pbkV2ZW50IiwibGlzdGVuU2lnbnVwRXZlbnQiLCJsaXN0ZW5JbWFnZUNhcHRjaGFFdmVudCIsImxpc3RlblNtc0NhcHRjaGFFdmVudCIsInNob3dFdmVudCIsImhpZGVFdmVudCIsInNtc1N1Y2Nlc3NFdmVudCIsInNlbGYiLCJtZXNzYWdlQm94Iiwic2hvd1N1Y2Nlc3MiLCJjb3VudCIsInVuYmluZCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJ0ZXh0IiwiY2xlYXJJbnRlcnZhbCIsInJlbW92ZUNsYXNzIiwic2lnbmluQnRuIiwic2lnbnVwQnRuIiwiY2xvc2VCdG4iLCJjbGljayIsImNzcyIsImxlZnQiLCJjdXJyZW50TGVmIiwicGFyc2VJbnQiLCJhbmltYXRlIiwic2lnbmluR3JvdXAiLCJ0ZWxlcGhvbmVJbnB1dCIsImZpbmQiLCJwYXNzd29yZElucHV0IiwicmVtZW1iZXJJbnB1dCIsInRlbGVwaG9uZSIsInZhbCIsInBhc3N3b3JkIiwicmVtZW1iZXIiLCJwcm9wIiwieGZ6YWpheCIsInBvc3QiLCJkYXRhIiwic3VjY2VzcyIsInJlc3VsdCIsInJlbG9hZCIsInNpZ251cEdyb3VwIiwidXNlcm5hbWVJbnB1dCIsImltZ0NhcHRjaGFJbnB1dCIsInBhc3N3b3JkMUlucHV0IiwicGFzc3dvcmQySW5wdXQiLCJzbXNDYXB0Y2hhSW5wdXQiLCJ1c2VybmFtZSIsImltZ19jYXB0Y2hhIiwicGFzc3dvcmQxIiwicGFzc3dvcmQyIiwic21zX2NhcHRjaGEiLCJpbWdDYXB0Y2hhIiwiTWF0aCIsInJhbmRvbSIsInNob3dJbmZvIiwiZ2V0IiwiZmFpbCIsImVycm9yIiwidGVtcGxhdGUiLCJkZWZhdWx0cyIsImltcG9ydHMiLCJ0aW1lU2luY2UiLCJkYXRhVmFsdWUiLCJkYXRlIiwiRGF0ZSIsImRhdGV0cyIsImdldFRpbWUiLCJ0aW1lc3RhbXAiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF5IiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIl0sIm1hcHBpbmdzIjoiQUFFQSxTQUFTQSxhQXdDVCxTQUFTQyxPQUNMQyxLQUFLQyxhQUFlQyxFQUFFLGtCQUN0QkYsS0FBS0csV0FBYUQsRUFBRSxvQkF0Q3hCSixVQUFVTSxVQUFVQyxJQUFNLFdBQ1hMLEtBQ05NLHFCQURNTixLQUVOTyxtQkFHVFQsVUFBVU0sVUFBVUUsbUJBQXFCLFdBQ3JDLElBQUlFLEVBQVVOLEVBQUUsYUFDWk8sRUFBY1AsRUFBRSxrQkFDcEJNLEVBQVFFLE1BQU0sV0FDVkQsRUFBWUUsUUFDZCxXQUNFRixFQUFZRyxVQUlwQmQsVUFBVU0sVUFBVUcsZ0JBQWtCLFdBQ2xDTSxRQUFRQyxJQUFJLGNBQ1osSUFBSUMsRUFBTUMsT0FBT0MsU0FBU0MsS0FHdEJDLEVBRldILE9BQU9DLFNBQVNHLFNBRVAsS0FEYkosT0FBT0MsU0FBU0ksS0FFdkJDLEVBQU9QLEVBQUlRLFFBQVFKLEVBQU8sSUFDakJqQixFQUFFLFdBQ1JzQixLQUFLLFNBQVVDLEVBQU1DLEdBQ3hCLElBQUlDLEVBQUt6QixFQUFFd0IsR0FHWCxHQUZXQyxFQUFHQyxTQUFTLEtBQ1BDLEtBQUssVUFDVFAsRUFFUixPQURB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Wk4sRUFBS08sU0FHZSxJQUZuQlAsRUFBS1EsV0FFdUIsSUFEMUJSLEVBQUtTIiwiZmlsZSI6ImZyb250X2Jhc2UubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbi8v55So5p2l5aSE55CG5a+86Iiq5p2h55qEXHJcbmZ1bmN0aW9uIEZyb250QmFzZSgpIHtcclxuICAgIFxyXG59XHJcblxyXG5Gcm9udEJhc2UucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGlzdGVuQXV0aEJveEhvdmVyKCk7XHJcbiAgICBzZWxmLmhhbmRsZU5hdlN0YXR1cygpO1xyXG59O1xyXG5cclxuRnJvbnRCYXNlLnByb3RvdHlwZS5saXN0ZW5BdXRoQm94SG92ZXIgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIGF1dGhCb3ggPSAkKFwiLmF1dGgtYm94XCIpO1xyXG4gICAgdmFyIHVzZXJNb3JlQm94ID0gJChcIi51c2VyLW1vcmUtYm94XCIpO1xyXG4gICAgYXV0aEJveC5ob3ZlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdXNlck1vcmVCb3guc2hvdygpO1xyXG4gICAgfSxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdXNlck1vcmVCb3guaGlkZSgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5Gcm9udEJhc2UucHJvdG90eXBlLmhhbmRsZU5hdlN0YXR1cyA9IGZ1bmN0aW9uKCl7XHJcbiAgICBjb25zb2xlLmxvZygnLi4uLi4uLi4uLicpO1xyXG4gICAgdmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgdmFyIHByb3RvY29sID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sO1xyXG4gICAgdmFyIGhvc3QgPSB3aW5kb3cubG9jYXRpb24uaG9zdDtcclxuICAgIHZhciBkb21haW4gPSBwcm90b2NvbCArICcvLycgKyBob3N0O1xyXG4gICAgdmFyIHBhdGggPSB1cmwucmVwbGFjZShkb21haW4sJycpO1xyXG4gICAgdmFyIG5hdkxpcyA9ICQoXCIubmF2IGxpXCIpO1xyXG4gICAgbmF2TGlzLmVhY2goZnVuY3Rpb24gKGluZGV4LGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgbGkgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgIHZhciBhVGFnID0gbGkuY2hpbGRyZW4oJ2EnKTtcclxuICAgICAgICB2YXIgaHJlZiA9IGFUYWcuYXR0cignaHJlZicpO1xyXG4gICAgICAgIGlmKGhyZWYgPT09IHBhdGgpe1xyXG4gICAgICAgICAgICBsaS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbi8v6KaB5p2l5aSE55CG55m75b2V5ZKM5rOo5YaM55qEXHJcbmZ1bmN0aW9uIEF1dGgoKSB7XHJcbiAgICB0aGlzLnNjcm9sbFdyYXBlciA9ICQoXCIuc2Nyb2xsLXdyYXBlclwiKTtcclxuICAgIHRoaXMuc21zQ2FwdGNoYSA9ICQoXCIuc21zLWNhcHRjaGEtYnRuXCIpXHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmxpc3RlblNob3dIaWRlRXZlbnQoKTtcclxuICAgIHRoaXMubGlzdGVuU3dpdGNoRXZlbnQoKTtcclxuICAgIHRoaXMubGlzdGVuU2lnbmluRXZlbnQoKTtcclxuICAgIHRoaXMubGlzdGVuU2lnbnVwRXZlbnQoKTtcclxuICAgIHRoaXMubGlzdGVuSW1hZ2VDYXB0Y2hhRXZlbnQoKTtcclxuICAgIHRoaXMubGlzdGVuU21zQ2FwdGNoYUV2ZW50KCk7XHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5zaG93RXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgJChcIi5tYXNrLXdyYXBlclwiKS5zaG93KCk7XHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5oaWRlRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgJChcIi5tYXNrLXdyYXBlclwiKS5oaWRlKCk7XHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5zbXNTdWNjZXNzRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgbWVzc2FnZUJveC5zaG93U3VjY2Vzcygn55+t5L+h6aqM6K+B56CB5Y+R6YCB5oiQ5Yqf77yBJyk7XHJcbiAgICBzZWxmLnNtc0NhcHRjaGEuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICB2YXIgY291bnQgPSAxMDtcclxuICAgIHNlbGYuc21zQ2FwdGNoYS51bmJpbmQoJ2NsaWNrJyk7XHJcbiAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zbXNDYXB0Y2hhLnRleHQoY291bnQrJ3MnKTtcclxuICAgICAgICBjb3VudCAtPSAxO1xyXG4gICAgICAgIGlmKGNvdW50IDw9IDApe1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcclxuICAgICAgICAgICAgc2VsZi5zbXNDYXB0Y2hhLnJlbW92ZUNsYXNzKCdkaXNhYmxlJyk7XHJcbiAgICAgICAgICAgIHNlbGYuc21zQ2FwdGNoYS50ZXh0KCflj5HpgIHpqozor4HnoIEnKTtcclxuICAgICAgICAgICAgc2VsZi5saXN0ZW5TbXNDYXB0Y2hhRXZlbnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9LDEwMDApO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2hvd0hpZGVFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgc2lnbmluQnRuID0gJChcIi5zaWduaW4tYnRuXCIpO1xyXG4gICAgdmFyIHNpZ251cEJ0biA9ICQoXCIuc2lnbnVwLWJ0blwiKTtcclxuICAgIHZhciBjbG9zZUJ0biA9ICQoXCIuY2xvc2UtYnRuXCIpO1xyXG4gICAgc2lnbmluQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNob3dFdmVudCgpO1xyXG4gICAgICAgIHNlbGYuc2Nyb2xsV3JhcGVyLmNzcyh7XCJsZWZ0XCI6MH0pO1xyXG4gICAgfSk7XHJcbiAgICBzaWdudXBCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc2hvd0V2ZW50KCk7XHJcbiAgICAgICAgc2VsZi5zY3JvbGxXcmFwZXIuY3NzKHtcImxlZnRcIjotNDAwfSk7XHJcbiAgICB9KTtcclxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmhpZGVFdmVudCgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5Td2l0Y2hFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgc3dpdGNoZXIgPSAkKFwiLnN3aXRjaFwiKTtcclxuICAgIHN3aXRjaGVyLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3VycmVudExlZiA9IHNlbGYuc2Nyb2xsV3JhcGVyLmNzcyhcImxlZnRcIik7XHJcbiAgICAgICAgY3VycmVudExlZiA9IHBhcnNlSW50KGN1cnJlbnRMZWYpO1xyXG4gICAgICAgIGlmKGN1cnJlbnRMZWYgPCAwKXtcclxuICAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwZXIuYW5pbWF0ZSh7XCJsZWZ0XCI6MH0pO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBzZWxmLnNjcm9sbFdyYXBlci5hbmltYXRlKHtcImxlZnRcIjpcIi00MDBweFwifSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaWduaW5FdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgc2lnbmluR3JvdXAgPSAkKFwiLnNpZ25pbi1ncm91cFwiKTtcclxuICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKTtcclxuICAgIHZhciBwYXNzd29yZElucHV0ID0gc2lnbmluR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkJ11cIik7XHJcbiAgICB2YXIgcmVtZW1iZXJJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdyZW1lbWJlciddXCIpO1xyXG5cclxuICAgIHZhciBzdWJtaXRCdG4gPSBzaWduaW5Hcm91cC5maW5kKFwiLnN1Ym1pdC1idG5cIik7XHJcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhvbmVJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQgPSBwYXNzd29yZElucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciByZW1lbWJlciA9IHJlbWVtYmVySW5wdXQucHJvcChcImNoZWNrZWRcIik7XHJcblxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnYWNjb3VudC9sb2dpbi8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6e1xyXG4gICAgICAgICAgICAgICAgJ3RlbGVwaG9uZSc6dGVsZXBob25lLFxyXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkJzpwYXNzd29yZCxcclxuICAgICAgICAgICAgICAgICdyZW1lbWJlcic6cmVtZW1iZXI/MTowLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaWdudXBFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgc2lnbnVwR3JvdXAgPSAkKCcuc2lnbnVwLWdyb3VwJyk7XHJcbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XHJcbiAgICB2YXIgdXNlcm5hbWVJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd1c2VybmFtZSddXCIpO1xyXG4gICAgdmFyIGltZ0NhcHRjaGFJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdpbWdfY2FwdGNoYSddXCIpO1xyXG4gICAgdmFyIHBhc3N3b3JkMUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkMSddXCIpO1xyXG4gICAgdmFyIHBhc3N3b3JkMklucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkMiddXCIpO1xyXG4gICAgdmFyIHNtc0NhcHRjaGFJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdzbXNfY2FwdGNoYSddXCIpO1xyXG5cclxuXHJcblxyXG4gICAgdmFyIHN1Ym1pdEJ0biA9IHNpZ251cEdyb3VwLmZpbmQoXCIuc3VibWl0LWJ0blwiKTtcclxuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciB1c2VybmFtZSA9IHVzZXJuYW1lSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIGltZ19jYXB0Y2hhID0gaW1nQ2FwdGNoYUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZDEgPSBwYXNzd29yZDFJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQyID0gcGFzc3dvcmQySW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHNtc19jYXB0Y2hhID0gc21zQ2FwdGNoYUlucHV0LnZhbCgpO1xyXG5cclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzonYWNjb3VudC9yZWdpc3Rlci8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6e1xyXG4gICAgICAgICAgICAgICAgJ3RlbGVwaG9uZSc6dGVsZXBob25lLFxyXG4gICAgICAgICAgICAgICAgJ3VzZXJuYW1lJzp1c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICdpbWdfY2FwdGNoYSc6aW1nX2NhcHRjaGEsXHJcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQxJzpwYXNzd29yZDEsXHJcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQyJzpwYXNzd29yZDIsXHJcbiAgICAgICAgICAgICAgICAnc21zX2NhcHRjaGEnOnNtc19jYXB0Y2hhXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuSW1hZ2VDYXB0Y2hhRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIGltZ0NhcHRjaGEgPSAkKFwiLmltZy1jYXB0Y2hhXCIpO1xyXG4gICAgaW1nQ2FwdGNoYS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaW1nQ2FwdGNoYS5hdHRyKFwic3JjXCIsXCJhY2NvdW50L2ltZ19jYXB0Y2hhL1wiK1wiP3JhbmRvbT1cIitNYXRoLnJhbmRvbSgpKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU21zQ2FwdGNoYUV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9ICQoXCIuc2lnbnVwLWdyb3VwIGlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpO1xyXG4gICAgc2VsZi5zbXNDYXB0Y2hhLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XHJcbiAgICAgICAgaWYoIXRlbGVwaG9uZSl7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VCb3guc2hvd0luZm8oJ+ivt+i+k+WFpeaJi+acuuWPt+egge+8gScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnYWNjb3VudC9zbXNfY2FwdGNoYS8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOnRlbGVwaG9uZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zbXNTdWNjZXNzRXZlbnQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2ZhaWwnOmZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGF1dGggPSBuZXcgQXV0aCgpO1xyXG4gICAgYXV0aC5ydW4oKTtcclxuXHJcbiAgICB2YXIgZnJvbnRiYXNlID0gbmV3IEZyb250QmFzZSgpO1xyXG4gICAgZnJvbnRiYXNlLnJ1bigpO1xyXG59KTtcclxuXHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIGlmKHdpbmRvdy50ZW1wbGF0ZSl7XHJcbiAgICAgICAgdGVtcGxhdGUuZGVmYXVsdHMuaW1wb3J0cy50aW1lU2luY2UgPSBmdW5jdGlvbiAoZGF0YVZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZGF0YVZhbHVlKTtcclxuICAgICAgICAgICAgdmFyIGRhdGV0cyA9IGRhdGUuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICB2YXIgbm93dHMgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICB2YXIgdGltZXN0YW1wID0gKG5vd3RzIC0gZGF0ZXRzKSAvIDEwMDA7XHJcbiAgICAgICAgICAgIGlmICh0aW1lc3RhbXAgPCA2MCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICfliJrliJonO1xyXG4gICAgICAgICAgICB9ZWxzZSBpZih0aW1lc3RhbXAgPj0gNjAgJiYgdGltZXN0YW1wIDwgNjAqNjApe1xyXG4gICAgICAgICAgICAgICAgdmFyIG1pbnV0ZXMgPSBwYXJzZUludCh0aW1lc3RhbXAvNjApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1pbnV0ZXMgKyAn5YiG6ZKf5YmNJztcclxuICAgICAgICAgICAgfWVsc2UgaWYodGltZXN0YW1wID49IDYwKjYwICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0KXtcclxuICAgICAgICAgICAgICAgIHZhciBob3VycyA9IHBhcnNlSW50KHRpbWVzdGFtcC82MC82MCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaG91cnMgKyAn5bCP5pe25YmNJztcclxuICAgICAgICAgICAgfWVsc2UgaWYodGltZXN0YW1wID49IDYwKjYwKjI0ICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0KjMwKXtcclxuICAgICAgICAgICAgICAgIHZhciBkYXlzID0gcGFyc2VJbnQodGltZXN0YW1wLzYwLzYwLzI0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXlzICsgJ+WkqeWJjSc7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgdmFyIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTtcclxuICAgICAgICAgICAgICAgIHZhciBob3VyID0gZGF0ZS5nZXRIb3VycygpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1pbnV0ZSA9IGRhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHllYXIrJy8nK21vbnRoKycvJytkYXkrJyAnK2hvdXIrJzonK21pbnV0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0pOyJdfQ==
