function Banner(){this.bannerWidth=796,this.BannerGroup=$("#banner-group"),this.index=1,this.LeftArrow=$("#left-arrow"),this.RightArrow=$("#right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page-control")}function Index(){var n=this;n.page=2,n.category_id=0,n.loadMoreBtn=$("#load-more-btn")}Banner.prototype.initBanner=function(){var n=this,t=n.liList.eq(0).clone(),e=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(t),n.bannerUl.prepend(e),n.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,t=0;t<n.bannerCount;t++){var e=$("<li></li>");n.pageControl.append(e),0===t&&e.addClass("active")}n.pageControl.css({width:12*n.bannerCount+16*n.bannerCount})},Banner.prototype.toggleArrow=function(n){var t=this;n?(t.LeftArrow.show(),t.RightArrow.show()):(t.LeftArrow.hide(),t.RightArrow.hide())},Banner.prototype.animate=function(){var n=this;n.bannerUl.stop().animate({left:-n.bannerWidth*n.index},500);var t=n.index;t=0===t?n.bannerCount-1:t===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(t).addClass("active").siblings().removeClass("active")},Banner.prototype.listenArrowClick=function(){var n=this;this.LeftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerWidth*n.bannerCount}),n.index=n.bannerCount-1):n.index--,n.animate()}),this.RightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenBannerHover=function(){var n=this;this.BannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var e=this;e.pageControl.children("li").each(function(n,t){$(t).click(function(){e.index=n+1,e.animate()})})},Banner.prototype.run=function(){this.listenBannerHover(),this.loop(),this.listenArrowClick(),this.initPageControl(),this.initBanner(),this.listenPageControl()},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},Index.prototype.listenLoadMoreEvent=function(){var i=this,r=$("#load-more-btn");r.click(function(){xfzajax.get({url:"/news/news_list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var t=n.data;if(0<t.length){var e=template("news-items",{newses:t});$(".list-inner-group").append(e),i.page+=1}else r.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var o=this;$(".list-tab").children().click(function(){var r=$(this),a=r.attr("data-category");xfzajax.get({url:"/news/news_list/",data:{p:1,category_id:a},success:function(n){if(200===n.code){var t=n.data,e=template("news-items",{newses:t}),i=$(".list-inner-group");i.empty(),i.append(e),o.page=2,o.category_id=a,r.addClass("active").siblings().removeClass("active"),o.loadMoreBtn.show()}}})})},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsIkJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwiTGVmdEFycm93IiwiUmlnaHRBcnJvdyIsImJhbm5lclVsIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJzZWxmIiwicGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZE1vcmVCdG4iLCJwcm90b3R5cGUiLCJpbml0QmFubmVyIiwiZmlydFBhZ2UiLCJlcSIsImNsb25lIiwibGFzdFBhZ2UiLCJhcHBlbmQiLCJwcmVwZW5kIiwiY3NzIiwid2lkdGgiLCJsZWZ0IiwiaW5pdFBhZ2VDb250cm9sIiwiaSIsImNpcmNsZSIsImFkZENsYXNzIiwidG9nZ2xlQXJyb3ciLCJpc1Nob3ciLCJzaG93IiwiaGlkZSIsImFuaW1hdGUiLCJzdG9wIiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsImxpc3RlbkFycm93Q2xpY2siLCJjbGljayIsImxvb3AiLCJ0aW1lciIsInNldEludGVydmFsIiwibGlzdGVuQmFubmVySG92ZXIiLCJob3ZlciIsImNsZWFySW50ZXJ2YWwiLCJsaXN0ZW5QYWdlQ29udHJvbCIsImVhY2giLCJvYmoiLCJydW4iLCJsaXN0ZW5Mb2FkTW9yZUV2ZW50IiwibGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCIsInhmemFqYXgiLCJnZXQiLCJ1cmwiLCJkYXRhIiwicCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJuZXdzZXMiLCJ0cGwiLCJ0ZW1wbGF0ZSIsImxpIiwiYXR0ciIsIm5ld3NMaXN0R3JvdXAiLCJlbXB0eSJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsU0FDTEMsS0FBS0MsWUFBYyxJQUNuQkQsS0FBS0UsWUFBY0MsRUFBRSxpQkFDckJILEtBQUtJLE1BQVEsRUFDYkosS0FBS0ssVUFBWUYsRUFBRSxlQUNuQkgsS0FBS00sV0FBYUgsRUFBRSxn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QVUsU0FBVUMsR0FDaEIsR0FBc0IsTUFBbkJBLEVBQWEsS0FBVSxDQUN0QixJQUFJQyxFQUFTRCxFQUFhLEtBQ3RCRSxFQUFNQyxTQUFTLGFBQWEsQ0FBQ0YsT0FBU0EsSUFDdENLLEVBQWdCaEUsRUFBRSxxQkFDdEJnRSxFQUFjQyxRQUNkRCxFQUFjM0MsT0FBT3VDLEdBQ3JCakQsRUFBS0MsS0FBTyxFQUNaRCxFQUFLRSxZQUFjQSxFQUNuQmlELEVBQUdqQyxTQUFTLFVBQVVPLFdBQVdDLFlBQVksVUFDN0MxQixFQUFLRyxZQUFZa0IsY0FPckNoQyxFQUFFLFlBQ2UsSUFBSUosUUFDVnFELE9BRUssSUFBSXZDLE9BQ1Z1QyIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBCYW5uZXIoKSB7XHJcbiAgICB0aGlzLmJhbm5lcldpZHRoID0gNzk2O1xyXG4gICAgdGhpcy5CYW5uZXJHcm91cCA9ICQoXCIjYmFubmVyLWdyb3VwXCIpO1xyXG4gICAgdGhpcy5pbmRleCA9IDE7XHJcbiAgICB0aGlzLkxlZnRBcnJvdyA9ICQoXCIjbGVmdC1hcnJvd1wiKTtcclxuICAgIHRoaXMuUmlnaHRBcnJvdyA9ICQoXCIjcmlnaHQtYXJyb3dcIik7XHJcbiAgICB0aGlzLmJhbm5lclVsID0gJChcIiNiYW5uZXItdWxcIik7XHJcbiAgICB0aGlzLmxpTGlzdCA9IHRoaXMuYmFubmVyVWwuY2hpbGRyZW4oXCJsaVwiKTtcclxuICAgIHRoaXMuYmFubmVyQ291bnQgPSB0aGlzLmxpTGlzdC5sZW5ndGg7XHJcbiAgICB0aGlzLnBhZ2VDb250cm9sID0gJChcIi5wYWdlLWNvbnRyb2xcIik7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmluaXRCYW5uZXIgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGZpcnRQYWdlID0gc2VsZi5saUxpc3QuZXEoMCkuY2xvbmUoKTtcclxuICAgIHZhciBsYXN0UGFnZSA9IHNlbGYubGlMaXN0LmVxKHNlbGYuYmFubmVyQ291bnQgLSAxKS5jbG9uZSgpO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5hcHBlbmQoZmlydFBhZ2UpO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5wcmVwZW5kKGxhc3RQYWdlKTtcclxuICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcIndpZHRoXCI6c2VsZi5iYW5uZXJXaWR0aCooc2VsZi5iYW5uZXJDb3VudCArIDIpLFwibGVmdFwiOi1zZWxmLmJhbm5lcldpZHRofSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmluaXRQYWdlQ29udHJvbCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpPHNlbGYuYmFubmVyQ291bnQ7IGkrKyl7XHJcbiAgICAgICAgdmFyIGNpcmNsZSA9ICQoXCI8bGk+PC9saT5cIik7XHJcbiAgICAgICAgc2VsZi5wYWdlQ29udHJvbC5hcHBlbmQoY2lyY2xlKTtcclxuICAgICAgICBpZihpID09PSAwKXtcclxuICAgICAgICAgICAgY2lyY2xlLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgc2VsZi5wYWdlQ29udHJvbC5jc3Moe1wid2lkdGhcIjoxMipzZWxmLmJhbm5lckNvdW50ICsgOCoyKnNlbGYuYmFubmVyQ291bnR9KTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUudG9nZ2xlQXJyb3cgPSBmdW5jdGlvbihpc1Nob3cpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgaWYoaXNTaG93KXtcclxuICAgICAgICBzZWxmLkxlZnRBcnJvdy5zaG93KCk7XHJcbiAgICAgICAgc2VsZi5SaWdodEFycm93LnNob3coKTtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIHNlbGYuTGVmdEFycm93LmhpZGUoKTtcclxuICAgICAgICBzZWxmLlJpZ2h0QXJyb3cuaGlkZSgpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5hbmltYXRlID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuYmFubmVyVWwuc3RvcCgpLmFuaW1hdGUoe1wibGVmdFwiOi1zZWxmLmJhbm5lcldpZHRoKnNlbGYuaW5kZXh9LDUwMCk7XHJcbiAgICB2YXIgaW5kZXggPSBzZWxmLmluZGV4O1xyXG4gICAgaWYoaW5kZXggPT09IDApe1xyXG4gICAgICAgIGluZGV4ID0gc2VsZi5iYW5uZXJDb3VudCAtIDE7XHJcbiAgICB9ZWxzZSBpZihpbmRleCA9PT0gc2VsZi5iYW5uZXJDb3VudCsxKXtcclxuICAgICAgICBpbmRleCA9IDA7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICBpbmRleCA9IHNlbGYuaW5kZXggLSAxO1xyXG4gICAgfVxyXG4gICAgc2VsZi5wYWdlQ29udHJvbC5jaGlsZHJlbihcImxpXCIpLmVxKGluZGV4KS5hZGRDbGFzcyhcImFjdGl2ZVwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQXJyb3dDbGljayA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLkxlZnRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoc2VsZi5pbmRleCA9PT0gMCl7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjotc2VsZi5iYW5uZXJXaWR0aCpzZWxmLmJhbm5lckNvdW50fSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBzZWxmLmJhbm5lckNvdW50IC0gMTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgc2VsZi5pbmRleC0tO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5SaWdodEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZihzZWxmLmluZGV4ID09PSBzZWxmLmJhbm5lckNvdW50ICsgMSl7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjotc2VsZi5iYW5uZXJXaWR0aH0pXHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSAyO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxvb3AgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZihzZWxmLmluZGV4ID49IHNlbGYuYmFubmVyQ291bnQrMSl7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjotc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0sMjAwMCk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkJhbm5lckhvdmVyID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMuQmFubmVyR3JvdXAuaG92ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc2VsZi50aW1lcik7XHJcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyh0cnVlKTtcclxuICAgIH0sZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYubG9vcCgpO1xyXG4gICAgICAgIHNlbGYudG9nZ2xlQXJyb3coZmFsc2UpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlblBhZ2VDb250cm9sID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oXCJsaVwiKS5lYWNoKGZ1bmN0aW9uIChpbmRleCxvYmopIHtcclxuICAgICAgICAkKG9iaikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gaW5kZXggKyAxO1xyXG4gICAgICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmxpc3RlbkJhbm5lckhvdmVyKCk7XHJcbiAgICB0aGlzLmxvb3AoKTtcclxuICAgIHRoaXMubGlzdGVuQXJyb3dDbGljaygpO1xyXG4gICAgdGhpcy5pbml0UGFnZUNvbnRyb2woKTtcclxuICAgIHRoaXMuaW5pdEJhbm5lcigpO1xyXG4gICAgdGhpcy5saXN0ZW5QYWdlQ29udHJvbCgpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gSW5kZXgoKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYucGFnZSA9IDI7XHJcbiAgICBzZWxmLmNhdGVnb3J5X2lkID0gMDtcclxuICAgIHNlbGYubG9hZE1vcmVCdG4gPSAkKCcjbG9hZC1tb3JlLWJ0bicpO1xyXG59O1xyXG5cclxuSW5kZXgucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uKCl7XHJcbiAgICB0aGlzLmxpc3RlbkxvYWRNb3JlRXZlbnQoKTtcclxuICAgIHRoaXMubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCgpO1xyXG59O1xyXG5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkxvYWRNb3JlRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGxvYWRNb3JlQnRuID0gJCgnI2xvYWQtbW9yZS1idG4nKTtcclxuICAgIGxvYWRNb3JlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOicvbmV3cy9uZXdzX2xpc3QvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOntcclxuICAgICAgICAgICAgICAgICdwJzpzZWxmLnBhZ2UsXHJcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOnNlbGYuY2F0ZWdvcnlfaWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzZXMgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgICAgICBpZihuZXdzZXMubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbXNcIix7XCJuZXdzZXNcIjpuZXdzZXN9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVsID0gJChcIi5saXN0LWlubmVyLWdyb3VwXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bC5hcHBlbmQodHBsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRNb3JlQnRuLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGxpc3RUYWIgPSAkKCcubGlzdC10YWInKTtcclxuICAgIGxpc3RUYWIuY2hpbGRyZW4oKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGxpID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgY2F0ZWdvcnlfaWQgPSBsaS5hdHRyKCdkYXRhLWNhdGVnb3J5Jyk7XHJcbiAgICAgICAgdmFyIHBhZ2UgPSAxO1xyXG4gICAgICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6Jy9uZXdzL25ld3NfbGlzdC8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6e1xyXG4gICAgICAgICAgICAgICAgJ3AnOiBwYWdlLFxyXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzogY2F0ZWdvcnlfaWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzZXMgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1zXCIse1wibmV3c2VzXCI6bmV3c2VzfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NMaXN0R3JvdXAgPSAkKCcubGlzdC1pbm5lci1ncm91cCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld3NMaXN0R3JvdXAuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdzTGlzdEdyb3VwLmFwcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYXRlZ29yeV9pZCA9IGNhdGVnb3J5X2lkO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRNb3JlQnRuLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKCk7XHJcbiAgICBiYW5uZXIucnVuKCk7XHJcblxyXG4gICAgdmFyIGluZGV4ID0gbmV3IEluZGV4KCk7XHJcbiAgICBpbmRleC5ydW4oKTtcclxufSk7Il19
