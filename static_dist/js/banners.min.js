function Banners(){}Banners.prototype.run=function(){this.listenAddBannerEvent(),this.loadData()},Banners.prototype.loadData=function(){var r=this;xfzajax.get({url:"/cms/banner_list/",success:function(n){if(200===n.code)for(var e=n.data,a=0;a<e.length;a++){var t=e[a];r.creatBannerItem(t)}}})},Banners.prototype.creatBannerItem=function(n){var e=this,a=template("banner-item",{banner:n}),t=$(".banner-item-group");if(n){t.append(a);var r=t.find(".banner-item:last")}else{t.prepend(a);r=t.find(".banner-item:first")}e.addImageSelectEvent(r),e.addRemoveBannerEvent(r),e.addSaveBannerEvent(r)},Banners.prototype.listenAddBannerEvent=function(){var n=this;$("#add-banner-btn").click(function(){6<=$(".banner-item-group").children().length?window.messageBox.showError("最多只能添加6张轮播图！"):n.creatBannerItem()})},Banners.prototype.addImageSelectEvent=function(n){var a=n.find(".thumbnail"),e=n.find(".img-input");a.click(function(){e.click()}),e.change(function(){var n=new FormData,e=this.files[0];n.append("file",e),xfzajax.post({url:"/cms/upload_file/",data:n,processData:!1,contentType:!1,success:function(n){if(200===n.code){var e=n.data.url;a.attr("src",e)}}})})},Banners.prototype.addRemoveBannerEvent=function(e){e.find(".close-btn").click(function(){var n=e.attr("data-banner-id");n?xfzalert.alertConfirm({text:"是否删除该轮播图？",confirmCallback:function(){xfzajax.post({url:"/cms/delete_banner/",data:{banner_id:n},success:function(n){200===n.code&&(e.remove(),window.messageBox.showSuccess("删除轮播图成功！"))}})}}):e.remove()})},Banners.prototype.addSaveBannerEvent=function(t){var n=t.find(".save-btn"),r=t.find(".thumbnail"),i=t.find("input[name='priority']"),o=t.find("input[name='link-to']"),s=t.find(".priority"),c=t.attr("data-banner-id"),d="";d=c?"/cms/edit_banner/":"/cms/add_banners/",n.click(function(){var n=r.attr("src"),e=o.val(),a=i.val();xfzajax.post({url:d,data:{priority:a,img_url:n,link_to:e,pk:c},success:function(n){200===n.code&&(c?window.messageBox.showSuccess("轮播图修改成功！"):(c=n.data.banner_id,t.attr("data-banner-id",c),window.messageBox.showSuccess("添加一条轮播图！")),s.text("优先级："+a))}})})},$(function(){(new Banners).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbm5lcnMuanMiXSwibmFtZXMiOlsiQmFubmVycyIsInByb3RvdHlwZSIsInJ1biIsInRoaXMiLCJsaXN0ZW5BZGRCYW5uZXJFdmVudCIsImxvYWREYXRhIiwic2VsZiIsInhmemFqYXgiLCJnZXQiLCJ1cmwiLCJzdWNjZXNzIiwicmVzdWx0IiwiYmFubmVycyIsImkiLCJsZW5ndGgiLCJiYW5uZXIiLCJjcmVhdEJhbm5lckl0ZW0iLCJ0cGwiLCJ0ZW1wbGF0ZSIsImJhbm5lckdyb3VwIiwiJCIsImFwcGVuZCIsImJhbm5lckl0ZW0iLCJmaW5kIiwicHJlcGVuZCIsImFkZEltYWdlU2VsZWN0RXZlbnQiLCJhZGRSZW1vdmVCYW5uZXJFdmVudCIsImFkZFNhdmVCYW5uZXJFdmVudCIsImNsaWNrIiwiY2hpbGRyZW4iLCJ3aW5kb3ciLCJtZXNzYWdlQm94Iiwic2hvd0Vycm9yIiwiaW1hZ2UiLCJpbWdJbnB1dCIsImNoYW5nZSIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJmaWxlIiwiZmlsZXMiLCJwb3N0IiwiZGF0YSIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJhdHRyIiwiYmFubmVySWQiLCJ4ZnphbGVydCIsImFsZXJ0Q29uZmlybSIsInRleHQiLCJjb25maXJtQ2FsbGJhY2siLCJiYW5uZXJfaWQiLCJyZW1vdmUiLCJzaG93U3VjY2VzcyIsInNhdmVCdG4iLCJpbWdUYWciLCJwcmlvcml0eUlucHV0IiwibGlua3RvSW5wdXQiLCJwcmlvcml0eVNwYW4iLCJpbWdfdXJsIiwibGlua190byIsInZhbCIsInByaW9yaXR5IiwicGsiXSwibWFwcGluZ3MiOiJBQUNBLFNBQVNBLFdBSVRBLFFBQVFDLFVBQVVDLElBQU0sV0FDcEJDLEtBQUtDLHVCQUNMRCxLQUFLRSxZQUdUTCxRQUFRQyxVQUFVSSxTQUFXLFdBQ3pCLElBQUlDLEVBQU9ILEtBQ1hJLFFBQVFDLElBQUksQ0FDUkMsSUFBTSxvQkFDTkMsUUFBVSxTQUFVQyxHQUNoQixHQUFzQixNQUFu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LEVBQUUsWUFDZ0IsSUFBSXBCLFNBQ1ZFIiwiZmlsZSI6ImJhbm5lcnMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmZ1bmN0aW9uIEJhbm5lcnMoKSB7XHJcblxyXG59XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmxpc3RlbkFkZEJhbm5lckV2ZW50KCk7XHJcbiAgICB0aGlzLmxvYWREYXRhKCk7XHJcbn07XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5sb2FkRGF0YSA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgJ3VybCc6Jy9jbXMvYmFubmVyX2xpc3QvJyxcclxuICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgIHZhciBiYW5uZXJzID0gcmVzdWx0WydkYXRhJ107XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDtpPGJhbm5lcnMubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhbm5lciA9IGJhbm5lcnNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jcmVhdEJhbm5lckl0ZW0oYmFubmVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVycy5wcm90b3R5cGUuY3JlYXRCYW5uZXJJdGVtID0gZnVuY3Rpb24oYmFubmVyKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcImJhbm5lci1pdGVtXCIse1wiYmFubmVyXCI6YmFubmVyfSk7XHJcbiAgICB2YXIgYmFubmVyR3JvdXAgPSAkKFwiLmJhbm5lci1pdGVtLWdyb3VwXCIpO1xyXG4gICAgaWYoYmFubmVyKXtcclxuICAgICAgICBiYW5uZXJHcm91cC5hcHBlbmQodHBsKTtcclxuICAgICAgICB2YXIgYmFubmVySXRlbSA9IGJhbm5lckdyb3VwLmZpbmQoXCIuYmFubmVyLWl0ZW06bGFzdFwiKTtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIGJhbm5lckdyb3VwLnByZXBlbmQodHBsKTtcclxuICAgICAgICB2YXIgYmFubmVySXRlbSA9IGJhbm5lckdyb3VwLmZpbmQoXCIuYmFubmVyLWl0ZW06Zmlyc3RcIik7XHJcbiAgICB9XHJcbiAgICBzZWxmLmFkZEltYWdlU2VsZWN0RXZlbnQoYmFubmVySXRlbSk7XHJcbiAgICBzZWxmLmFkZFJlbW92ZUJhbm5lckV2ZW50KGJhbm5lckl0ZW0pO1xyXG4gICAgc2VsZi5hZGRTYXZlQmFubmVyRXZlbnQoYmFubmVySXRlbSk7XHJcbn07XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5saXN0ZW5BZGRCYW5uZXJFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgYWRkQnRuID0gJChcIiNhZGQtYmFubmVyLWJ0blwiKTtcclxuICAgIGFkZEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJhbm5lckdyb3VwID0gJChcIi5iYW5uZXItaXRlbS1ncm91cFwiKTtcclxuICAgICAgICB2YXIgbGVuZ3RoID0gYmFubmVyR3JvdXAuY2hpbGRyZW4oKS5sZW5ndGg7XHJcbiAgICAgICAgaWYobGVuZ3RoID49IDYpe1xyXG4gICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93RXJyb3IoXCLmnIDlpJrlj6rog73mt7vliqA25byg6L2u5pKt5Zu+77yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuY3JlYXRCYW5uZXJJdGVtKCk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkJhbm5lcnMucHJvdG90eXBlLmFkZEltYWdlU2VsZWN0RXZlbnQgPSBmdW5jdGlvbihiYW5uZXJJdGVtKXtcclxuICAgIHZhciBpbWFnZSA9IGJhbm5lckl0ZW0uZmluZChcIi50aHVtYm5haWxcIik7XHJcbiAgICB2YXIgaW1nSW5wdXQgPSBiYW5uZXJJdGVtLmZpbmQoXCIuaW1nLWlucHV0XCIpO1xyXG4gICAgaW1hZ2UuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGltZ0lucHV0LmNsaWNrKCk7XHJcbiAgICB9KTtcclxuICAgIGltZ0lucHV0LmNoYW5nZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xyXG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZChcImZpbGVcIixmaWxlKTtcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzonL2Ntcy91cGxvYWRfZmlsZS8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6Zm9ybURhdGEsXHJcbiAgICAgICAgICAgICdwcm9jZXNzRGF0YSc6ZmFsc2UsXHJcbiAgICAgICAgICAgICdjb250ZW50VHlwZSc6ZmFsc2UsXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gcmVzdWx0WydkYXRhJ11bJ3VybCddO1xyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlLmF0dHIoXCJzcmNcIix1cmwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVycy5wcm90b3R5cGUuYWRkUmVtb3ZlQmFubmVyRXZlbnQgPSBmdW5jdGlvbihiYW5uZXJJdGVtKXtcclxuICAgIHZhciBjbG9zZUJ0biA9IGJhbm5lckl0ZW0uZmluZChcIi5jbG9zZS1idG5cIik7XHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJhbm5lcklkID0gYmFubmVySXRlbS5hdHRyKCdkYXRhLWJhbm5lci1pZCcpO1xyXG4gICAgICAgIGlmKGJhbm5lcklkKXtcclxuICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRDb25maXJtKHtcclxuICAgICAgICAgICAgICAgICd0ZXh0Jzon5piv5ZCm5Yig6Zmk6K+l6L2u5pKt5Zu+77yfJyxcclxuICAgICAgICAgICAgICAgICdjb25maXJtQ2FsbGJhY2snOmZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAndXJsJzonL2Ntcy9kZWxldGVfYmFubmVyLycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Jhbm5lcl9pZCc6YmFubmVySWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbm5lckl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+WIoOmZpOi9ruaSreWbvuaIkOWKn++8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGJhbm5lckl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5hZGRTYXZlQmFubmVyRXZlbnQgPSBmdW5jdGlvbihiYW5uZXJJdGVtKXtcclxuICAgIHZhciBzYXZlQnRuID0gYmFubmVySXRlbS5maW5kKFwiLnNhdmUtYnRuXCIpO1xyXG4gICAgdmFyIGltZ1RhZyA9IGJhbm5lckl0ZW0uZmluZChcIi50aHVtYm5haWxcIik7XHJcbiAgICB2YXIgcHJpb3JpdHlJbnB1dCA9IGJhbm5lckl0ZW0uZmluZChcImlucHV0W25hbWU9J3ByaW9yaXR5J11cIik7XHJcbiAgICB2YXIgbGlua3RvSW5wdXQgPSBiYW5uZXJJdGVtLmZpbmQoXCJpbnB1dFtuYW1lPSdsaW5rLXRvJ11cIik7XHJcbiAgICB2YXIgcHJpb3JpdHlTcGFuID0gYmFubmVySXRlbS5maW5kKFwiLnByaW9yaXR5XCIpO1xyXG4gICAgdmFyIGJhbm5lcklkID0gYmFubmVySXRlbS5hdHRyKCdkYXRhLWJhbm5lci1pZCcpO1xyXG4gICAgdmFyIHVybCA9ICcnO1xyXG4gICAgaWYoYmFubmVySWQpe1xyXG4gICAgICAgIHVybCA9ICcvY21zL2VkaXRfYmFubmVyLyc7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICB1cmwgPSAnL2Ntcy9hZGRfYmFubmVycy8nO1xyXG4gICAgfVxyXG4gICAgc2F2ZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGltZ191cmwgPSBpbWdUYWcuYXR0cihcInNyY1wiKTtcclxuICAgICAgICB2YXIgbGlua190byA9IGxpbmt0b0lucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBwcmlvcml0eSA9IHByaW9yaXR5SW5wdXQudmFsKCk7XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6IHVybCxcclxuICAgICAgICAgICAgJ2RhdGEnOntcclxuICAgICAgICAgICAgICAgICdwcmlvcml0eSc6cHJpb3JpdHksXHJcbiAgICAgICAgICAgICAgICAnaW1nX3VybCc6aW1nX3VybCxcclxuICAgICAgICAgICAgICAgICdsaW5rX3RvJzpsaW5rX3RvLFxyXG4gICAgICAgICAgICAgICAgJ3BrJzogYmFubmVySWQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihiYW5uZXJJZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dTdWNjZXNzKFwi6L2u5pKt5Zu+5L+u5pS55oiQ5Yqf77yBXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYW5uZXJJZCA9IHJlc3VsdFsnZGF0YSddWydiYW5uZXJfaWQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5hdHRyKFwiZGF0YS1iYW5uZXItaWRcIixiYW5uZXJJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dTdWNjZXNzKCfmt7vliqDkuIDmnaHova7mkq3lm77vvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHlTcGFuLnRleHQoXCLkvJjlhYjnuqfvvJpcIitwcmlvcml0eSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGJhbm5lcnMgPSBuZXcgQmFubmVycygpO1xyXG4gICAgYmFubmVycy5ydW4oKTtcclxufSkiXX0=
